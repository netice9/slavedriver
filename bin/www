#!/usr/bin/env node

var http = require('http');
var https = require('https');

var app = require('../index');

var port = parseInt(process.env.PORT) || 3456;


if (process.env.SSL_CERT && process.env.SSL_KEY) {
 var server = https.createServer({key: process.env.SSL_KEY, cert: process.env.SSL_CERT}, app).listen(port, function () {

    var host = server.address().address;
    var port = server.address().port;

    console.log('Slavedriver listening at http://%s:%s', host, port);

  });
} else {
  var server = http.createServer(app).listen(port, function () {

    var host = server.address().address;
    var port = server.address().port;

    console.log('Slavedriver listening at http://%s:%s', host, port);

  });
}